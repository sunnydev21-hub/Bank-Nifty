<!DOCTYPE html>
<html>
<head>
    <title>Bank Nifty Prediction</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 40px;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        h1 {
            text-align: center;
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
        }
        th {
            background-color: #f2f2f2;
            text-align: left;
        }
        input[type="number"] {
            width: 100%;
            padding: 6px;
            box-sizing: border-box;
        }
        button {
            padding: 6px;
            background-color: #007BFF;
            color: white;
            border: none;
            cursor: pointer;
        }
        button:hover {
            background-color: #0056b3;
        }
        .result {
            padding: 6px;
            background-color: #f8f9fa;
            border: 1px solid #ced4da;
        }
    </style>
    <script>
        function submitForm(row) {
            let form = document.createElement('form');
            form.method = 'POST';
            form.action = '/';

            let upcrtInput = document.createElement('input');
            upcrtInput.type = 'hidden';
            upcrtInput.name = 'upcrt' + row;
            upcrtInput.value = document.getElementById('upcrt' + row).value;
            form.appendChild(upcrtInput);

            let lwcrtInput = document.createElement('input');
            lwcrtInput.type = 'hidden';
            lwcrtInput.name = 'lwcrt' + row;
            lwcrtInput.value = document.getElementById('lwcrt' + row).value;
            form.appendChild(lwcrtInput);

            let openInput = document.createElement('input');
            openInput.type = 'hidden';
            openInput.name = 'open' + row;
            openInput.value = document.getElementById('open' + row).value;
            form.appendChild(openInput);

            let predictInput = document.createElement('input');
            predictInput.type = 'hidden';
            predictInput.name = 'predict' + row;
            predictInput.value = row;
            form.appendChild(predictInput);

            // Add all form data and results to the form
            for (let i = 1; i <= 10; i++) {
                let upcrt = document.getElementById('upcrt' + i);
                let lwcrt = document.getElementById('lwcrt' + i);
                let open = document.getElementById('open' + i);
                let result_high = document.getElementById('result_high' + i);
                let result_low = document.getElementById('result_low' + i);

                if (upcrt && lwcrt && open) {
                    let hiddenUpcrt = document.createElement('input');
                    hiddenUpcrt.type = 'hidden';
                    hiddenUpcrt.name = 'upcrt' + i;
                    hiddenUpcrt.value = upcrt.value;
                    form.appendChild(hiddenUpcrt);

                    let hiddenLwcrt = document.createElement('input');
                    hiddenLwcrt.type = 'hidden';
                    hiddenLwcrt.name = 'lwcrt' + i;
                    hiddenLwcrt.value = lwcrt.value;
                    form.appendChild(hiddenLwcrt);

                    let hiddenOpen = document.createElement('input');
                    hiddenOpen.type = 'hidden';
                    hiddenOpen.name = 'open' + i;
                    hiddenOpen.value = open.value;
                    form.appendChild(hiddenOpen);
                }

                if (result_high && result_high.textContent) {
                    let hiddenResultHigh = document.createElement('input');
                    hiddenResultHigh.type = 'hidden';
                    hiddenResultHigh.name = 'result_high' + i;
                    hiddenResultHigh.value = result_high.textContent;
                    form.appendChild(hiddenResultHigh);
                }

                if (result_low && result_low.textContent) {
                    let hiddenResultLow = document.createElement('input');
                    hiddenResultLow.type = 'hidden';
                    hiddenResultLow.name = 'result_low' + i;
                    hiddenResultLow.value = result_low.textContent;
                    form.appendChild(hiddenResultLow);
                }
            }

            document.body.appendChild(form);
            form.submit();
        }

        function clearForm(row) {
            document.getElementById('upcrt' + row).value = '';
            document.getElementById('lwcrt' + row).value = '';
            document.getElementById('open' + row).value = '';
            document.getElementById('result_high' + row).textContent = '';
            document.getElementById('result_low' + row).textContent = '';
        }
    </script>
</head>
<body>
    <div class="container">
        <h1>Bank Nifty Prediction</h1>
        <form method="post">
            <table>
                <tr>
                    <th>S.No</th>
                    <th>UPCRT</th>
                    <th>LWCRT</th>
                    <th>Open</th>
                    <th>Predict</th>
                    <th>Clear</th>
                    <th>High Result</th>
                    <th>Low Result</th>
                </tr>
                {% for i in range(1, 11) %}
                <tr>
                    <td>{{ i }}</td>
                    <td>
                        <input type="number" step="any" id="upcrt{{ i }}" name="upcrt{{ i }}" value="{{ form_data['upcrt' + i|string] }}" required>
                    </td>
                    <td>
                        <input type="number" step="any" id="lwcrt{{ i }}" name="lwcrt{{ i }}" value="{{ form_data['lwcrt' + i|string] }}" required>
                    </td>
                    <td>
                        <input type="number" step="any" id="open{{ i }}" name="open{{ i }}" value="{{ form_data['open' + i|string] }}" required>
                    </td>
                    <td><button type="button" onclick="submitForm({{ i }})">Predict</button></td>
                    <td><button type="button" onclick="clearForm({{ i }})">Clear</button></td>
                    <td id="result_high{{ i }}" class="result">{% if results_high[i] is not none %}{{ '%.2f' % results_high[i] }}{% endif %}</td>
                    <td id="result_low{{ i }}" class="result">{% if results_low[i] is not none %}{{ '%.2f' % results_low[i] }}{% endif %}</td>
                </tr>
                {% endfor %}
            </table>
        </form>
    </div>
</body>
</html>
